---
import '../styles/global.css';
import Footer from '../components/footer.astro';
import { GoogleTagmanagerPartytown, SiteVerification } from '@digi4care/astro-google-tagmanager';
import Navbar from "../components/navbar.astro";
import { SEO } from "astro-seo";

const SITE = {
    baseUrl: "https://judaicadhpenn.org",
    name: "Judaica at Penn Libraries",
    defaultDescription:
        "Explore Judaica at Penn Libraries: collections, guides, exhibits, and digital resources.",
    defaultOgImage: "/assets/LCKAJS.jpg",   // ensure this exists in /public/social/
                // TODO: set your handle
};

// Props each page can pass into BaseLayout
const {
    title = SITE.name,
    description = SITE.defaultDescription,
    ogImage = SITE.defaultOgImage,
    ogType = "website",    // or "article"
    noindex = false
} = Astro.props;

// Build absolute URLs
const baseUrl = Astro.site?.href ?? SITE.baseUrl;
const url = new URL(Astro.url.pathname, baseUrl).toString();
const absoluteOg = ogImage.startsWith("http")
    ? ogImage
    : new URL(ogImage, baseUrl).toString();
---

<!doctype html>
<html lang="en" dir="ltr">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content={Astro.generator} />
    <meta name="algolia-site-verification" content="CDB8F870A8F8037E" />
    <!-- Optional but fine -->
    <link rel="sitemap" type="application/xml" href="/sitemap-index.xml" />
    <link rel="icon" type="image/png" href="/favicon-32x32.png" />

    <SEO
            title={title}
            description={description}
            noindex={noindex}
            openGraph={{
                basic: {
                    title,
                    type: ogType,
                    image: absoluteOg,
                    url
                },
                optional: {
                    siteName: SITE.name
                }
            }}
            twitter={{
                card: "summary_large_image",
                title,
                description,
                image: absoluteOg,
                imageAlt: "Judaica at Penn Libraries"
            }}
            extend={{
                link: [{ rel: "canonical", href: url }],
                meta: [{ property: "og:image:alt", content: "Judaica at Penn Libraries" }]
            }}
    />

    <SiteVerification id="SITE_VERIFICATION_ID" />
    <GoogleTagmanagerPartytown id="G-62TY761V9V" />
</head>


<body class="min-h-screen flex flex-col">
<Navbar />

<main  class="flex-1">
    <slot />
</main>

<Footer />

<script is:inline src="https://cdnjs.cloudflare.com/ajax/libs/flowbite/2.3.0/flowbite.min.js"></script>
</body>
</html>
